!function(){"use strict";function t(t){this.sound=document.createElement("audio"),this.sound.src=t,this.sound.setAttribute("preload","auto"),this.sound.style.display="none",document.body.appendChild(this.sound),this.play=function(){this.sound.play()},this.stop=function(){this.sound.pause()}}let e={shoot:new t("assets/shoot.wav"),hit:new t("assets/hit.wav")};function i(t,e,i){return kontra.Sprite({type:"alien",x:t,y:e,dy:.2,radius:i,render(){this.context.fillStyle="purple",this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}})}function r(t){return t<5?{rx:t,ry:0}:t>=5&&t<9?{rx:t-4.5,ry:1}:t>=9&&t<12?{rx:t-8,ry:2}:t>=12&&t<14?{rx:t-10.5,ry:3}:{rx:t-12,ry:4}}function s(t,e){return kontra.Sprite({type:"star",x:Math.random()*t,y:Math.random()*e,dx:Math.random()/10,dy:Math.random()/10,radius:1,render(){this.context.strokeStyle="white",this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.stroke()}})}let n={isOver:!1,over:function(t){let e=document.querySelector(".dialog"),i=document.querySelector(".msg");e.style.display="block",i.innerHTML=t}},{canvas:o}=kontra.init(),h=window.innerWidth>500,a=h?500:window.innerWidth-20,d=h?window.innerHeight-20:window.innerHeight-60;o.width=a,o.height=d;let u=[];kontra.GameLoop({update(){0===u.filter(t=>"alien"===t.type).length&&!n.isOver&&(n.over("Game Over <br /> You Won !!"),n.isOver=!0),u.map(t=>{t.update(),t.x<-t.radius?t.x=o.width+t.radius:t.x>o.width+t.radius&&(t.x=0-t.radius),t.y<-t.radius?t.y=o.height+t.radius:t.y>o.height+t.radius&&(t.y=-t.radius,"alien"===t.type&&(n.over("Game Over <br / > You Lost :("),n.isOver=!0))}),function(t,i,r,s){for(let n=0;n<t.length;n++)if("alien"===t[n].type)for(let o=0;o<t.length;o++)if("alien"!==t[o].type&&"star"!==t[o].type){let h=t[n],a=t[o],d=h.x-a.x,u=h.y-a.y;if(Math.hypot(d,u)<h.radius+a.radius){e.hit.play(),h.ttl=0,a.ttl=0,h.radius>r/8&&t.push(i(h.x,h.y,h.radius/2)),"ship"===a.type&&(s.over("Game Over <br /> You Lost :("),s.isOver=!0);break}}}(u,i,l,n),u=u.filter(t=>t.isAlive())},render(){u.map(t=>t.render())}}).start();let l=a/6,y=l/4;for(let t=0;t<15;t++){let{rx:e,ry:s}=r(t),n=l+e*l,o=l+s*l/2;u.push(i(n,o,y))}for(let t=0;t<100;t++)u.push(s(a,d));kontra.initKeys();let c=kontra.Sprite({type:"ship",x:a/2-15,y:d-20,radius:22,dt:0,render(){this.context.strokeStyle="white",this.context.beginPath(),this.context.moveTo(this.x,this.y),this.context.lineTo(this.x+15,this.y-22),this.context.lineTo(this.x+30,this.y),this.context.closePath(),this.context.stroke()},update(){kontra.keyPressed("left")?this.x-=5:kontra.keyPressed("right")&&(this.x+=5),this.advance(),this.dt+=1/60,kontra.keyPressed("down")&&this.dt>.25&&(e.shoot.play(),this.dt=0,u.push(kontra.Sprite({color:"yellow",x:this.x+14,y:this.y-23,dy:-12,ttl:45,radius:2,width:2,height:5})))}});u.push(c),document.querySelector("#shoot").addEventListener("click",(function(){n.isOver||(e.shoot.play(),c.dt=0,u.push(kontra.Sprite({color:"yellow",x:c.x+14,y:c.y-23,dy:-12,ttl:45,radius:2,width:2,height:5})))})),document.querySelector("#left").addEventListener("click",()=>c.x-=20),document.querySelector("#right").addEventListener("click",()=>c.x+=20)}();
